<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>layui</title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link rel="stylesheet" href="/lib/layui-v2.5.5/css/layui.css" media="all">
        <link rel="stylesheet" href="/css/public.css" media="all">
    </head>
    <body>
        <div class="layuimini-container">
            <div class="layuimini-main">

                <!-- <blockquote class="layui-elem-quote layui-text">
                     鉴于小伙伴的普遍反馈，先温馨提醒两个常见“问题”：1. <a href="/doc/base/faq.html#form" target="_blank">为什么select/checkbox/radio没显示？</a> 2. <a href="/doc/modules/form.html#render" target="_blank">动态添加的表单元素如何更新？</a>
                 </blockquote>-->

                <!-- <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                     <legend>表单集合演示</legend>
                 </fieldset>-->


                <form class="layui-form" lay-filter="demo1">
                    <!--  <div class="layui-form-item">
                          <label class="layui-form-label">单行输入框</label>
                          <div class="layui-input-block">
                              <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入标题" class="layui-input">
                          </div>
                      </div>
                      <div class="layui-form-item">
                          <label class="layui-form-label">验证必填项</label>
                          <div class="layui-input-block">
                              <input type="text" name="username" lay-verify="required" lay-reqtext="用户名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">
                          </div>
                      </div>-->


                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label" id="u53_input" >用户名 :</label>
                            <div class="layui-input-inline">
                                <input type="text" name="username"  class="layui-input" lay-verify="required" readonly>
                            </div>

                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">真实姓名:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="realName"  class="layui-input" lay-verify="required" >
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">证件类型:</label>
                            <div class="layui-input-inline">
                                <select id="state" lay-verify="required" lay-filter="industry" name="cardTypeName"
                                        id="cardTypeName">
                                    <option value="">--请选择--</option>
                                    <option value="身份证">身份证</option>
                                    <option value="驾驶证">驾驶证</option>
                                    <option value="军官证">军官证</option>
                                    <option value="护照">护照</option>
                                </select>
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">证件号码:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="idCard"  class="layui-input" lay-verify="identity">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">联系电话:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="mobile"  class="layui-input" lay-verify="required|phone">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">移动电话:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="mobile"  class="layui-input" lay-verify="required|phone">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">电子邮件:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="email"  class="layui-input" lay-verify="email">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">邮政编码</label>
                            <div class="layui-input-inline">
                                <input type="text" name="postCode"  class="layui-input" lay-verify="required">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">密码:</label>
                            <div class="layui-input-inline">
                                <input type="password" name="password"  class="layui-input" lay-verify="required">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">推荐人 :</label>
                            <div class="layui-input-inline">
                                <input type="text" name="referCode"  class="layui-input" lay-verify="required">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <span class="layui-form-item">
                <label class="layui-form-label">收货国家(地区)</label>
               <div class="layui-inline">
                    <select name="country" class="layui-unselect layui-form-select">
                        <option value="">地区</option>
                        <option value="西湖区">西湖区</option>
                        <option value="余杭区">余杭区</option>
                        <option value="拱墅区">拱墅区</option>
                    </select>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">开户行  :</label>
                    <div class="layui-input-inline">
                        <input type="text" name="bankName" autocomplete="off" class="layui-input" lay-verify="required">
                    </div>
                    <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                </div>
            </span>

                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">开户人 :</label>
                            <div class="layui-input-inline">
                                <input type="text" name="accountHolder" autocomplete="off" class="layui-input" lay-verify="required">
                            </div>

                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">开户卡号:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="bankAccount" autocomplete="off" class="layui-input" lay-verify="required">
                            </div>
                        </div>
                    </div>

                    <!-- <div class="layui-form-item">
                         <div class="layui-inline">
                             <label class="layui-form-label">上传身份证图片（正反面） :</label>
                             <div class="layui-input-inline">
                                 <input type="file" name="idphoto">
                             </div>

                         </div>
                         <div class="layui-inline">
                             <label class="layui-form-label">上传银行卡图片</label>
                             <div class="layui-input-inline">
                                 <input type="file" name="bankphoto">
                             </div>
                         </div>
                     </div>-->

                    <div class="layui-form-item layui-form-text">
                        <label class="layui-form-label">送货地址</label>
                        <div class="layui-input-block">
                            <textarea placeholder="请输入内容" class="layui-textarea" name="userAddress"></textarea>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button type="button" id="btn">立即提交</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <script src="/lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
        <script src="/lib/jquery-3.4.1/jquery-3.4.1.min.js"></script>
        <script>
            layui.use(['form', 'table', 'layer', 'jquery', 'laydate'], function () {
                var form = layui.form;
                var table = layui.table;
                var $ = layui.jquery;
                var layer = layui.layer;
                var laydate = layui.laydate;
                var name= $("input[name='username']").val()
                        $.ajax({
                            url: "/user/viplist.do",
                            type: "post",
                            datatype: "json",
                            data: {"username": name},
                            success: function (rec) {
                                if (rec.code == 0) {
                                    var data = rec.data[0]
                                    $("input[name='username']").val(data.username)
                                    $("input[name='realName']").val(data.realName)
                                    $("option[value="+data.cardTypeName+"]").prop("selected","true")
                                    $("input[name='idCard']").val(data.idCard)
                                    $("input[name='mobile']").val(data.mobile)
                                    $("input[name='mobile']").val(data.mobile)
                                    $("input[name='email']").val(data.email)
                                    $("input[name='password']").val(data.password)
                                    $("input[name='postCode']").val(data.postCode)
                                    $("input[name='referCode']").val(data.referCode)
                                    $("option[value="+data.country+"]").prop("selected","true")
                                    $("input[name='bankName']").val(data.bankName)
                                    $("input[name='accountHolder']").val(data.accountHolder)
                                    $("input[name='bankAccount']").val(data.bankAccount)
                                    $("textarea[name='userAddress']").val(data.userAddress)

                                    form.render()
                                }
                            }
                        })
                function closelayer(){
                    window.parent.location.reload();//刷新父页面
                    var index = parent.layer.getFrameIndex(window.name);
                    parent.layer.close(index);
                }

                        $("#btn").click(function () {
                            var data1=  form.val("demo1")
                            $.ajax({
                                url:"/user/updateperson.do",
                                type:"post",
                                data:data1,
                                datatype:"json",
                                success:function (rec) {
                                    if (rec.code==0){
                                        alert("编辑成功")
                                        closelayer()
                                    }
                                }
                            })

                        })
            })

        </script>


    </body>
</html>