<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>layui</title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link rel="stylesheet" href="/lib/layui-v2.5.5/css/layui.css" media="all">
        <link rel="stylesheet" href="/css/public.css" media="all">
    </head>
    <body>
        <div class="layuimini-container">
            <div class="layuimini-main">

                <!-- <blockquote class="layui-elem-quote layui-text">
                     鉴于小伙伴的普遍反馈，先温馨提醒两个常见“问题”：1. <a href="/doc/base/faq.html#form" target="_blank">为什么select/checkbox/radio没显示？</a> 2. <a href="/doc/modules/form.html#render" target="_blank">动态添加的表单元素如何更新？</a>
                 </blockquote>-->

                <!-- <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                     <legend>表单集合演示</legend>
                 </fieldset>-->


                <form class="layui-form" lay-filter="demo11">
                    <!--  <div class="layui-form-item">
                          <label class="layui-form-label">单行输入框</label>
                          <div class="layui-input-block">
                              <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入标题" class="layui-input">
                          </div>
                      </div>
                      <div class="layui-form-item">
                          <label class="layui-form-label">验证必填项</label>
                          <div class="layui-input-block">
                              <input type="text" name="username" lay-verify="required" lay-reqtext="用户名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">
                          </div>
                      </div>-->


                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label" id="u53_input">用户名 :</label>
                            <div class="layui-input-inline">
                                <input type="text" name="username"  class="layui-input" lay-verify="required">
                            </div>

                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">真实姓名:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="realName"  class="layui-input" lay-verify="required">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">证件类型:</label>
                            <div class="layui-input-inline">
                                <select lay-verify="required" lay-filter="industry" name="cardTypeName"
                                        id="cardTypeName" >
                                    <option value=""></option>
                                    <!--<option value="身份证">身份证</option>
                                    <option value="驾驶证">驾驶证</option>
                                    <option value="军官证">军官证</option>
                                    <option value="护照">护照</option>-->
                                </select>
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">证件号码:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="idCard"  class="layui-input" lay-verify="identity">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">联系电话:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="moblie"  class="layui-input" lay-verify="required|phone">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">移动电话:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="moblie"  class="layui-input" lay-verify="required|phone">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">电子邮件</label>
                            <div class="layui-input-inline">
                                <input type="text" name="email"  class="layui-input" lay-verify="email">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">邮政编码</label>
                            <div class="layui-input-inline">
                                <input type="text" name="postCode"  class="layui-input" lay-verify="required">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">密码:</label>
                            <div class="layui-input-inline">
                                <input type="password" name="password"  class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">推荐人 :</label>
                            <div class="layui-input-inline">
                                <input type="text" name="referCode"  class="layui-input" lay-verify="required">
                            </div>
                            <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                        </div>
                    </div>
                    <span class="layui-form-item">
                <label class="layui-form-label">收件地区:</label>
               <div class="layui-inline">
                    <select name="country">
                        <option value="">地区</option>
                        <option value="西湖区">西湖区</option>
                        <option value="余杭区">余杭区</option>
                        <option value="拱墅区">拱墅区</option>
                    </select>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">开户行  :</label>
                    <div class="layui-input-inline">
                        <input type="text" name="bankName"  class="layui-input" lay-verify="required">
                    </div>
                    <div class="layui-form-mid layui-word-aux"><span style="color: red">*</span></div>
                </div>
            </span>

                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">开户人 :</label>
                            <div class="layui-input-inline">
                                <input type="text" name="accountHolder"  class="layui-input" lay-verify="required">
                            </div>

                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">开户卡号:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="bankAccount"  class="layui-input" lay-verify="required">
                            </div>
                        </div>
                    </div>

                   <!-- <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">上传身份证图片（正反面） :</label>
                            <div class="layui-input-inline">
                                <input type="file" name="idphoto">
                            </div>

                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">上传银行卡图片</label>
                            <div class="layui-input-inline">
                                <input type="file" name="bankphoto">
                            </div>
                        </div>
                    </div>-->

                    <div class="layui-form-item layui-form-text">
                        <label class="layui-form-label">送货地址</label>
                        <div class="layui-input-block">
                            <textarea placeholder="请输入内容" class="layui-textarea" name="userAddress"></textarea>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button class="layui-btn" lay-submit lay-filter="formSubmit">立即提交</button>
                            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <script src="/lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
<!--        <script src="/lib/jquery-3.4.1/jquery-3.4.1.min.js"></script>-->

        <script>


            layui.use(['form', 'table', 'layer', 'jquery', 'laydate'], function () {
                var form = layui.form;
                var table = layui.table;
                var $ = layui.jquery;
                var layer = layui.layer;
                var laydate = layui.laydate;
                var str=""
                /*动态插入证件*/
                $.ajax({
                    url:"/dic/find.do",
                    type:"post",
                    datatype:"json",
                    data:{"typeCode":"CARD_TYPE"},
                    limit:null
                    ,success:function (rec) {
                        if(rec.code===0){
                            var list=rec.data;
                            $("#cardTypeName").empty();
                            $("#cardTypeName").append(new Option("请选择身份证",""));
                            for (var i = 0; i <list.length ; i++) {
                                var data=list[i];
                                // str+=" <option value="+data.valueName+">"+data.valueName+"</option>"
                                $("#cardTypeName").append(new Option(data.valueName,data.valueName));
                            }
                            form.render("select");
                            // $("#cardTypeName").append(str)
                        }else {
                            alert("failed")
                        }
                    },
                    error:function () {
                        alert("error")
                    }
                })

                //创建一个编辑器
                //var editIndex = layedit.build('LAY_demo_editor');

                //自定义验证规则
                form.verify({
                    title: function (value) {
                        if (value.length < 5) {
                           alert('标题至少得5个字符啊') ;
                        }
                    }
                    , pass: [
                        /^[\S]{6,12}$/
                        , '密码必须6到12位，且不能出现空格'
                    ]
                    , content: function (value) {
                        layedit.sync(editIndex);
                    }
                });
                form.on('submit(formSubmit)', function (data) {

           /*        var username = $("input[name='username']").val();
                   var realName = $("input[name='realName']").val();
                   var cardType = $("input[name='cardTypeName']").val();
                   var idCard = $("input[name='idCard']").val();
                   var phone = $("input[name='phone']").val();
                   var moblie = $("input[name='moblie']").val();
                   var email = $("input[name='email']").val();
                   var password = $("input[name='password']").val();
                   var postCode = $("input[name='postCode']").val();
                   var referCode = $("input[name='referCode']").val();  //推荐人   写死的是领进门的名字
                   var country = $("select[name='country']").val();
                   var bankName = $("input[name='bankName']").val();
                   var accountHolder = $("input[name='accountHolder']").val();
                   var bankAccount = $("input[name='bankAccount']").val();
                   var idphoto = $("input[name='idphoto']").val();
                   var bankphoto = $("input[name='bankphoto']").val();
                   var userAddress = $("textarea[name='userAddress']").val();
                   /!*获取图片文件*!/
                   var formData = new FormData;
                   formData.append("username", username)
                   formData.append("realName", realName)
                   formData.append("cardTypeName", cardType)
                   formData.append("idCard", idCard)
                   formData.append("moblie", moblie)
                   formData.append("email", email)
                   formData.append("postCode", postCode)
                   formData.append("referCode", referCode)
                   formData.append("country", country)
                   formData.append("bankName", bankName)
                   formData.append("accountHolder", accountHolder)
                   formData.append("bankAccount", bankAccount)
                   formData.append("idCardPicPath", idphoto)
                   formData.append("bankPicPath", bankphoto)
                   formData.append("userAddress", userAddress)
                   formData.append("password", password)*/

                 /*  $.ajax({
                       url: "/user/add.do",
                       type: "post",
                       data: formData,
                       datatype: "json",
                       contentType: false,
                       processData: false,
                       async: false,
                       success: function (rec) {
                           if (rec.code == 0) {
                               alert("添加成功")
                           }
                       }
                   })*/
                   $.ajax({
                       url: "/user/add.do",
                       type: "post",
                       data: data.field,
                       async: false,
                       success: function (rec) {
                           if (rec.code == 0) {
                               alert("添加成功")
                           }else if (rec.code == 1){
                               alert("添加失败")
                           }else if(rec.msg==("failed")){
                               alert("该用户已存在，请重新输入")
                           }
                       }
                   })
               })
               form.reader;
            })

        </script>


    </body>
</html>